<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Familia Unida - Finanzas</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACYSURBVHgB7ZLBCcAgDEWzQXfqEp2pO3WljuALRYNgiFIg6c+9B9+HhocWQJtMm5mOiJgc8JdYqTg5UBFOBqw4GfAL0AaUKpQQFRPhdMBeRJYcCBGPBl5ltoDcYzBgBT6Z8GAFTKDHCrR0IOshqDXwFY9HDEZPZriqEwMV4WTAipMBVxC9gBfQug3sYODtqAAAAABJRU5ErkJggg==">
    <meta name="theme-color" content="#4F46E5">
    <meta name="description" content="Aplicaci√≥n para ordenar las finanzas familiares juntos">
</head>
<body>
    <!-- Header con mensaje emocional -->
    <header class="app-header">
        <div class="header-content">
            <h1 class="app-title">Familia Unida</h1>
            <p class="emotional-message" id="emotionalMessage">Esto lo estamos ordenando juntos</p>
        </div>
        <button class="menu-button" id="menuButton" aria-label="Men√∫">
            <span></span><span></span><span></span>
        </button>
    </header>

    <!-- Men√∫ lateral -->
    <aside class="side-menu" id="sideMenu">
        <div class="menu-header">
            <h2>Men√∫</h2>
            <button class="close-menu" id="closeMenu">&times;</button>
        </div>
        <nav class="menu-nav">
            <button class="menu-item active" data-tab="dashboard">
                <span class="menu-icon">üìä</span>
                <span>Resumen</span>
            </button>
            <button class="menu-item" data-tab="balance">
                <span class="menu-icon">üí∞</span>
                <span>Saldo disponible</span>
            </button>
            <button class="menu-item" data-tab="expenses">
                <span class="menu-icon">üìà</span>
                <span>Gastos por categor√≠a</span>
            </button>
            <button class="menu-item" data-tab="business">
                <span class="menu-icon">üßÅ</span>
                <span>Postres</span>
            </button>
            <button class="menu-item" data-tab="funds">
                <span class="menu-icon">üè¶</span>
                <span>Fondos / Ahorros</span>
            </button>
            <button class="menu-item" data-tab="history">
                <span class="menu-icon">üìã</span>
                <span>Historial</span>
            </button>
            <div class="menu-divider"></div>
            <button class="menu-item" data-tab="add-transaction">
                <span class="menu-icon">‚ûï</span>
                <span>Agregar movimiento</span>
            </button>
            <button class="menu-item" data-tab="settings">
                <span class="menu-icon">‚öôÔ∏è</span>
                <span>Configuraci√≥n</span>
            </button>
        </nav>
        <div class="menu-footer">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">FU</div>
                <div class="user-details">
                    <span id="userName">Familia</span>
                    <small id="userEmail">Cargando...</small>
                </div>
            </div>
            <button class="logout-button" id="logoutButton">Cerrar sesi√≥n</button>
        </div>
    </aside>
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- Contenido principal -->
    <main class="main-content">
        <!-- Pantalla: Resumen -->
        <section id="dashboard" class="tab-content active">
            <div class="month-selector">
                <button class="month-nav" id="prevMonth">‚Üê</button>
                <h2 class="current-month" id="currentMonth">Febrero 2024</h2>
                <button class="month-nav" id="nextMonth">‚Üí</button>
            </div>
            
            <div class="summary-cards">
                <div class="summary-card income">
                    <div class="card-header">
                        <span class="card-icon">üíµ</span>
                        <h3>Ingresos totales</h3>
                    </div>
                    <div class="card-value" id="totalIncome">$0</div>
                    <div class="card-trend">vs mes anterior: <span id="incomeTrend">0%</span></div>
                </div>
                
                <div class="summary-card expense">
                    <div class="card-header">
                        <span class="card-icon">üõí</span>
                        <h3>Gastos del hogar</h3>
                    </div>
                    <div class="card-value" id="totalExpenses">$0</div>
                    <div class="card-trend">vs mes anterior: <span id="expenseTrend">0%</span></div>
                </div>
                
                <div class="summary-card business">
                    <div class="card-header">
                        <span class="card-icon">üßÅ</span>
                        <h3>Resultado postres</h3>
                    </div>
                    <div class="card-value" id="businessResult">$0</div>
                    <div class="card-subtitle">Ventas - Insumos</div>
                </div>
                
                <div class="summary-card savings">
                    <div class="card-header">
                        <span class="card-icon">üè¶</span>
                        <h3>Ahorro del mes</h3>
                    </div>
                    <div class="card-value" id="monthlySavings">$0</div>
                    <div class="card-subtitle">Total en fondos</div>
                </div>
            </div>
            
            <div class="balance-card final-balance">
                <h3>Balance final del mes</h3>
                <div class="balance-value" id="finalBalance">$0</div>
                <div class="balance-message" id="balanceMessage"></div>
            </div>
            
            <div class="funds-preview">
                <h3>Estado de fondos</h3>
                <div class="funds-list" id="fundsList">
                    <!-- Los fondos se cargar√°n aqu√≠ -->
                </div>
            </div>
        </section>

        <!-- Pantalla: Saldo disponible -->
        <section id="balance" class="tab-content">
            <h2>Saldo disponible</h2>
            <div class="balance-cards" id="balanceCards">
                <!-- Los saldos se cargar√°n aqu√≠ -->
            </div>
            <div class="total-balance-card">
                <h3>Total combinado</h3>
                <div class="total-balance" id="totalBalance">$0</div>
            </div>
        </section>

        <!-- Pantalla: Gastos por categor√≠a -->
        <section id="expenses" class="tab-content">
            <h2>Gastos por categor√≠a</h2>
            <div class="category-filter">
                <select id="expenseMonthFilter">
                    <option value="current">Este mes</option>
                    <option value="previous">Mes anterior</option>
                </select>
            </div>
            <div class="category-chart" id="categoryChart">
                <!-- Gr√°fico de gastos -->
            </div>
            <div class="category-ranking" id="categoryRanking">
                <!-- Ranking se cargar√° aqu√≠ -->
            </div>
        </section>

        <!-- Pantalla: Postres -->
        <section id="business" class="tab-content">
            <h2>Emprendimiento Postres</h2>
            <div class="business-cards">
                <div class="business-card sales">
                    <h3>Ventas</h3>
                    <div class="business-value" id="totalSales">$0</div>
                    <div class="business-subtitle">Este mes</div>
                </div>
                <div class="business-card expenses">
                    <h3>Insumos</h3>
                    <div class="business-value" id="totalSupplies">$0</div>
                    <div class="business-subtitle">Este mes</div>
                </div>
                <div class="business-card profit">
                    <h3>Ganancia</h3>
                    <div class="business-value" id="businessProfit">$0</div>
                    <div class="business-subtitle">Ventas - Insumos</div>
                </div>
            </div>
            
            <div class="fund-status">
                <h3>Fondo fijo postres</h3>
                <div class="fund-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="dessertFundProgress" style="width: 0%"></div>
                    </div>
                    <div class="fund-stats">
                        <span id="dessertFundCurrent">$0</span>
                        <span>/</span>
                        <span id="dessertFundGoal">$0</span>
                    </div>
                </div>
                <div class="fund-missing" id="dessertFundMissing">Faltan $0 para el objetivo</div>
            </div>
        </section>

        <!-- Pantalla: Fondos / Ahorros -->
        <section id="funds" class="tab-content">
            <h2>Fondos / Ahorros</h2>
            <div class="funds-management">
                <div class="funds-list" id="fullFundsList">
                    <!-- Lista completa de fondos -->
                </div>
                <button class="add-fund-button" id="addFundButton">+ Configurar nuevo fondo</button>
            </div>
        </section>

        <!-- Pantalla: Historial -->
        <section id="history" class="tab-content">
            <h2>Historial de movimientos</h2>
            <div class="history-filters">
                <select id="filterType">
                    <option value="all">Todos los tipos</option>
                    <option value="household_expense">Gastos hogar</option>
                    <option value="personal_income">Ingresos</option>
                    <option value="business">Postres</option>
                    <option value="fund">Fondos</option>
                </select>
                <select id="filterPerson">
                    <option value="all">Todas las personas</option>
                </select>
                <select id="filterPayment">
                    <option value="all">Todos los medios</option>
                </select>
                <input type="date" id="filterDate" placeholder="Fecha espec√≠fica">
            </div>
            <div class="history-list" id="historyList">
                <!-- Historial se cargar√° aqu√≠ -->
            </div>
        </section>

        <!-- Pantalla: Agregar movimiento -->
        <section id="add-transaction" class="tab-content">
            <h2>Agregar movimiento</h2>
            <form class="transaction-form" id="transactionForm">
                <div class="form-group">
                    <label for="transactionType">Tipo de movimiento</label>
                    <select id="transactionType" required>
                        <option value="">Seleccionar tipo</option>
                        <option value="household_expense">Gasto del hogar</option>
                        <option value="personal_income">Ingreso diario</option>
                        <option value="business_expense">Insumos postres</option>
                        <option value="business_income">Ventas postres</option>
                        <option value="fund_deposit">Ingreso a fondo</option>
                        <option value="fund_withdrawal">Uso de fondo</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="transactionDate">Fecha</label>
                        <input type="date" id="transactionDate" required value="">
                    </div>
                    <div class="form-group">
                        <label for="transactionAmount">Monto ($)</label>
                        <input type="number" id="transactionAmount" min="0.01" step="0.01" required placeholder="0.00">
                    </div>
                </div>

                <div class="form-group" id="categoryField">
                    <label for="transactionCategory">Categor√≠a</label>
                    <select id="transactionCategory">
                        <!-- Se llenar√° din√°micamente -->
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="transactionPerson">Persona</label>
                        <select id="transactionPerson" required>
                            <!-- Se llenar√° din√°micamente -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="transactionPayment">Medio</label>
                        <select id="transactionPayment" required>
                            <!-- Se llenar√° din√°micamente -->
                        </select>
                    </div>
                </div>

                <div class="form-group" id="fundField" style="display: none;">
                    <label for="transactionFund">Fondo</label>
                    <select id="transactionFund">
                        <!-- Se llenar√° din√°micamente -->
                    </select>
                </div>

                <div class="form-group">
                    <label for="transactionNote">Nota (opcional)</label>
                    <textarea id="transactionNote" rows="2" placeholder="Descripci√≥n breve..."></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" class="cancel-button" data-tab="dashboard">Cancelar</button>
                    <button type="submit" class="submit-button">Guardar movimiento</button>
                </div>
            </form>
        </section>

        <!-- Pantalla: Configuraci√≥n -->
        <section id="settings" class="tab-content">
            <h2>Configuraci√≥n</h2>
            <div class="settings-section">
                <h3>Objetivos mensuales</h3>
                <div class="goal-settings" id="goalSettings">
                    <!-- Configuraci√≥n de objetivos -->
                </div>
            </div>
            <div class="settings-section">
                <h3>Instalar aplicaci√≥n</h3>
                <p>Para una mejor experiencia, instala esta aplicaci√≥n en tu dispositivo:</p>
                <button class="install-button" id="installButton">üì≤ Instalar app</button>
                <p class="install-hint">La app funcionar√° offline y tendr√° acceso directo desde tu pantalla principal.</p>
            </div>
            <div class="settings-section">
                <h3>Familia</h3>
                <div class="family-members" id="familyMembers">
                    <!-- Miembros de la familia -->
                </div>
            </div>
        </section>
    </main>

    <!-- Notificaciones -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>
</html>
